import{c as j,r,g as h,j as e,X as y}from"./index-G15lFc1y.js";import{P}from"./plus-PL2C2F-8.js";import{T as C}from"./trash-2-f3-So98d.js";import{P as z}from"./package-D2YwNnQe.js";const S=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],$=j("square-pen",S);const A=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],I=j("upload",A),U=()=>{const[g,v]=r.useState([]),[N,i]=r.useState(!1),[c,o]=r.useState(null),[s,a]=r.useState({name:"",description:"",price:"",category:"",stock_quantity:"",wholesale_price:"",wholesale_moq:""}),[p,d]=r.useState(null),[b,n]=r.useState(null),x=r.useCallback(async()=>{const t=await h.get("http://localhost:5000/api/products");v(t.data)},[]);r.useEffect(()=>{x()},[x]);const w=t=>{o(t),a({name:t.name,description:t.description,price:t.price,category:t.category,stock_quantity:t.stock_quantity,wholesale_price:t.wholesale_price||"",wholesale_moq:t.wholesale_moq||""}),n(t.image_url?`http://localhost:5000${t.image_url}`:null),i(!0)},k=async t=>{if(window.confirm("Delete this product?")){const l=localStorage.getItem("token");await h.delete(`http://localhost:5000/api/products/${t}`,{headers:{Authorization:`Bearer ${l}`}}),x()}},_=t=>{const l=t.target.files[0];d(l),l&&n(URL.createObjectURL(l))},q=async t=>{t.preventDefault();const l=localStorage.getItem("token"),m=new FormData;Object.keys(s).forEach(u=>m.append(u,s[u])),p&&m.append("image",p);try{c?await h.put(`http://localhost:5000/api/products/${c.id}`,m,{headers:{Authorization:`Bearer ${l}`}}):await h.post("http://localhost:5000/api/products",m,{headers:{Authorization:`Bearer ${l}`}}),i(!1),o(null),o(null),a({name:"",description:"",price:"",category:"",stock_quantity:"",wholesale_price:"",wholesale_moq:""}),d(null),n(null),x()}catch(u){console.error(u)}},f=()=>{i(!1),o(null),o(null),a({name:"",description:"",price:"",category:"",stock_quantity:"",wholesale_price:"",wholesale_moq:""}),d(null),n(null)};return e.jsxs("div",{className:"min-h-screen bg-surface py-8",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold font-display text-midnight mb-2",children:["Inventory ",e.jsx("span",{className:"text-ocean",children:"Control"})]}),e.jsxs("p",{className:"text-gray-500",children:[g.length," products in stock"]})]}),e.jsxs("button",{onClick:()=>{o(null),i(!0)},className:"flex items-center gap-2 px-6 py-3 bg-ocean hover:bg-ocean-dark text-white font-bold rounded-xl transition-all shadow-lg shadow-ocean/20",children:[e.jsx(P,{size:20}),"Add New Product"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"h-48 bg-gray-100 relative",children:[e.jsx("img",{src:t.image_url?`http://localhost:5000${t.image_url}`:"https://placehold.co/400x300?text=No+Image",alt:t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-3 right-3 bg-midnight text-white text-xs font-bold px-3 py-1.5 rounded-full",children:t.category||"Uncategorized"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-lg text-midnight mb-2",children:t.name}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-2xl font-bold text-ocean",children:["$",t.price]}),e.jsx("span",{className:"text-sm text-gray-400 ml-1",children:"/ kg"})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${t.stock_quantity>10?"bg-green-100 text-green-700":t.stock_quantity>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[t.stock_quantity," kg"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>w(t),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 border border-ocean text-ocean hover:bg-ocean hover:text-white rounded-xl transition-all font-semibold",children:[e.jsx($,{size:16}),"Edit"]}),e.jsx("button",{onClick:()=>k(t.id),className:"flex items-center justify-center px-4 py-2 border border-red-200 text-red-600 hover:bg-red-50 rounded-xl transition-all",children:e.jsx(C,{size:16})})]})]})]},t.id))}),g.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx(z,{size:64,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"No products yet. Add your first product!"})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold font-display text-midnight",children:c?"Edit Product":"Add New Product"}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:e.jsx(y,{size:24})})]}),e.jsxs("form",{onSubmit:q,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-ocean transition-colors",children:b?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b,alt:"Preview",className:"max-h-48 mx-auto rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{d(null),n(null)},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600",children:e.jsx(y,{size:16})})]}):e.jsxs("div",{children:[e.jsx(I,{className:"mx-auto text-gray-400 mb-2",size:40}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload or drag and drop"}),e.jsx("input",{type:"file",onChange:_,accept:"image/*",className:"hidden",id:"image-upload"}),e.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer text-ocean font-semibold hover:text-ocean-dark",children:"Browse Files"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product Name"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>a({...s,name:t.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-ocean focus:border-transparent",placeholder:"e.g., Atlantic Salmon"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category"}),e.jsx("input",{type:"text",value:s.category,onChange:t=>a({...s,category:t.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-ocean focus:border-transparent",placeholder:"e.g., Fresh Fish"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:t=>a({...s,description:t.target.value}),required:!0,rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-ocean focus:border-transparent resize-none",placeholder:"Describe the product..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Price (per kg)"}),e.jsx("input",{type:"number",step:"0.01",value:s.price,onChange:t=>a({...s,price:t.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-ocean focus:border-transparent",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Stock Quantity (kg)"}),e.jsx("input",{type:"number",value:s.stock_quantity,onChange:t=>a({...s,stock_quantity:t.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-ocean focus:border-transparent",placeholder:"0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Wholesale Price (per kg)"}),e.jsx("input",{type:"number",step:"0.01",value:s.wholesale_price,onChange:t=>a({...s,wholesale_price:t.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-ocean focus:border-transparent",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Wholesale MOQ (kg)"}),e.jsx("input",{type:"number",value:s.wholesale_moq,onChange:t=>a({...s,wholesale_moq:t.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-ocean focus:border-transparent",placeholder:"0"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-ocean hover:bg-ocean-dark text-white font-bold rounded-xl transition-all shadow-lg shadow-ocean/20",children:c?"Update Product":"Add Product"}),e.jsx("button",{type:"button",onClick:f,className:"px-6 py-3 border border-gray-200 text-gray-600 hover:bg-gray-50 font-semibold rounded-xl transition-all",children:"Cancel"})]})]})]})})]})};export{U as default};
