import{c as L,n as R,r as m,j as e,D as S,L as b,e as O,i as w}from"./index-CBEZQWhp.js";import{C as k}from"./circle-alert-BzLtqy3G.js";import{S as P}from"./shopping-bag-B7rMIUEU.js";import{P as D}from"./package-CnLOzWAP.js";import{U as M}from"./users-B7nS_JMH.js";import{T as z}from"./truck-BfSwiH1Q.js";import{C as A}from"./circle-check-big-CHA0gCaF.js";import{C as _,a as U}from"./clock-BWJy3jyL.js";const G=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],T=L("activity",G),J=()=>{const{user:a}=R(),[r,d]=m.useState({orders:0,products:0,revenue:0,customers:0}),[h,o]=m.useState([]),[g,p]=m.useState([]),[j,s]=m.useState(!0),[n,c]=m.useState(null);m.useEffect(()=>{(async()=>{if(!localStorage.getItem("token")){c("No authentication token found. Please login."),s(!1);return}try{const[l,u,v]=await Promise.all([w.get("/orders"),w.get("/products"),w.get("/orders/analytics")]),$=l.data.reduce((f,N)=>f+parseFloat(N.total_amount),0),C=new Set(l.data.map(f=>f.user_id)).size;d({orders:l.data.length,products:u.data.length,revenue:$.toFixed(2),customers:C});const E=l.data.sort((f,N)=>new Date(N.created_at)-new Date(f.created_at));o(E.slice(0,5)),p(v.data)}catch(l){console.error("Failed to fetch admin data",l),c(l.response?.data?.message||l.message||"Failed to load dashboard data")}finally{s(!1)}})()},[]);const i=m.useMemo(()=>{const t=new Date().getHours();return t<12?"Good Morning":t<18?"Good Afternoon":"Good Evening"},[]);return j?e.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gray-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ocean"})}):e.jsx("div",{className:"min-h-screen bg-gray-50/50 py-8 font-sans",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8 fade-in",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-midnight mb-1",children:[i,", ",e.jsx("span",{className:"text-ocean",children:a?.name||"Admin"})]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Here's what's happening with your store today."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"hidden md:block text-right mr-2",children:[e.jsx("div",{className:"text-sm font-bold text-midnight",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"text-xs text-gray-400",children:"System Status: Optimal"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-green-100 shadow-sm rounded-full",children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Live"})]})]})]}),n&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6 flex items-center gap-2",children:[e.jsx(k,{size:20}),n]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(y,{title:"Total Revenue",value:`$${r.revenue}`,icon:e.jsx(S,{className:"text-white",size:24}),trend:"+12.5%",trendUp:!0,gradient:"from-blue-600 to-blue-400",delay:0}),e.jsx(y,{title:"Total Orders",value:r.orders,icon:e.jsx(P,{className:"text-white",size:24}),trend:"+5.2%",trendUp:!0,gradient:"from-purple-600 to-purple-400",delay:100}),e.jsx(y,{title:"Products",value:r.products,icon:e.jsx(D,{className:"text-white",size:24}),trend:"Inventory Status",trendUp:!0,gradient:"from-orange-500 to-pink-500",delay:200}),e.jsx(y,{title:"Customers",value:r.customers,icon:e.jsx(M,{className:"text-white",size:24}),trend:"+8 New",trendUp:!0,gradient:"from-teal-500 to-emerald-400",delay:300})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-midnight",children:"Revenue Analytics"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Revenue trends over the last period"})]}),e.jsxs("select",{className:"text-sm border-gray-200 rounded-lg p-2 bg-gray-50 font-medium text-gray-600 focus:ring-ocean focus:border-ocean",children:[e.jsx("option",{children:"Last 7 Days"}),e.jsx("option",{children:"Last 30 Days"})]})]}),e.jsx("div",{className:"h-64 w-full",children:e.jsx(B,{data:g})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-midnight",children:"Recent Orders"}),e.jsxs(b,{to:"/admin/orders",className:"text-ocean hover:text-ocean-dark text-sm font-semibold flex items-center gap-1 transition-colors",children:["View All ",e.jsx(O,{size:16})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[h.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"font-bold text-midnight group-hover:text-ocean transition-colors",children:["#SF-",t.id]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-ocean/10 flex items-center justify-center text-ocean font-bold text-xs",children:t.user_name.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.user_name})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx(I,{status:t.status})}),e.jsxs("td",{className:"px-6 py-4 text-right font-bold text-gray-800",children:["$",t.total_amount]})]},t.id)),h.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-400",children:"No recent orders found"})})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-midnight to-gray-900 rounded-2xl p-6 text-white shadow-lg",children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"Quick Actions"}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Manage your store efficiently"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(b,{to:"/admin/products",className:"flex items-center gap-4 p-3 rounded-xl bg-white/10 hover:bg-white/20 hover:scale-105 transition-all cursor-pointer border border-white/5",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg text-blue-400",children:e.jsx(D,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm",children:"Manage Products"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Add or edit inventory"})]})]}),e.jsxs(b,{to:"/admin/orders",className:"flex items-center gap-4 p-3 rounded-xl bg-white/10 hover:bg-white/20 hover:scale-105 transition-all cursor-pointer border border-white/5",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg text-purple-400",children:e.jsx(z,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm",children:"Process Orders"}),e.jsx("div",{className:"text-xs text-gray-400",children:"View pending shipments"})]})]}),e.jsxs(b,{to:"/admin/settings",className:"flex items-center gap-4 p-3 rounded-xl bg-white/10 hover:bg-white/20 hover:scale-105 transition-all cursor-pointer border border-white/5",children:[e.jsx("div",{className:"p-2 bg-pink-500/20 rounded-lg text-pink-400",children:e.jsx(S,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm",children:"Sales Report"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Download monthly report"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("h4",{className:"font-bold text-midnight mb-4 flex items-center gap-2",children:[e.jsx(T,{size:18,className:"text-ocean"})," System Status"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Database"}),e.jsxs("span",{className:"text-green-600 font-medium flex items-center gap-1",children:[e.jsx(A,{size:14})," Connected"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Payment Gateway"}),e.jsxs("span",{className:"text-green-600 font-medium flex items-center gap-1",children:[e.jsx(A,{size:14})," Active"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Last Backup"}),e.jsx("span",{className:"text-gray-700 font-medium",children:"2 hours ago"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100",children:[e.jsx("h4",{className:"font-bold text-midnight mb-2 text-sm",children:"Test Audio"}),e.jsxs("button",{onClick:()=>{new Audio("/notification.mp3").play().catch(()=>alert("Audio blocked! Please interact with the page first."))},className:"w-full py-2.5 bg-ocean/5 text-ocean border border-ocean/20 rounded-xl font-bold text-xs hover:bg-ocean/10 transition-colors flex items-center justify-center gap-2",children:[e.jsx(k,{size:14})," Test Alert Sound"]})]})]})]})]})]})})},y=({title:a,value:r,icon:d,trend:h,trendUp:o,gradient:g,delay:p})=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 relative overflow-hidden group hover:-translate-y-1 transition-transform duration-300",style:{animationDelay:`${p}ms`},children:[e.jsxs("div",{className:"flex justify-between items-start z-10 relative",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:a}),e.jsx("h3",{className:"text-3xl font-bold text-midnight tracking-tight",children:r})]}),e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${g} shadow-lg group-hover:scale-110 transition-transform`,children:d})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 z-10 relative",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${o?"bg-green-50 text-green-600":"bg-red-50 text-red-600"}`,children:h}),e.jsx("span",{className:"text-xs text-gray-400",children:"vs last month"})]}),e.jsx("div",{className:`absolute -bottom-4 -right-4 w-24 h-24 rounded-full opacity-5 bg-gradient-to-br ${g} blur-xl group-hover:opacity-10 transition-opacity`})]}),I=({status:a})=>{const r={delivered:"bg-green-100 text-green-700 border-green-200",processing:"bg-yellow-100 text-yellow-700 border-yellow-200",shipped:"bg-blue-100 text-blue-700 border-blue-200",cancelled:"bg-red-100 text-red-700 border-red-200",pending:"bg-gray-100 text-gray-600 border-gray-200"},d={delivered:e.jsx(A,{size:12}),processing:e.jsx(U,{size:12}),shipped:e.jsx(z,{size:12}),cancelled:e.jsx(_,{size:12}),pending:e.jsx(k,{size:12})};return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide border ${r[a]||r.pending}`,children:[d[a]||d.pending,a]})},B=({data:a})=>{const[r,d]=m.useState(null);if(!a||a.length===0)return e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 text-sm",children:"No data available"});const h=Math.max(...a.map(s=>Number(s.revenue)),100)*1.1,o=a.map((s,n)=>{const c=n/(a.length-1)*100,i=100-Number(s.revenue)/h*100;return{x:c,y:i,val:s.revenue,label:s.displayDate}}),g=s=>s.reduce((c,i,t,x)=>{if(t===0)return`M ${i.x},${i.y}`;const l=p(x[t-1],x[t-2],i),u=p(i,x[t-1],x[t+1],!0);return`${c} C ${l.x},${l.y} ${u.x},${u.y} ${i.x},${i.y}`},""),p=(s,n,c,i)=>{const t=n||s,x=c||s,l=.2,u=s.x+(x.x-t.x)*l*(i?-1:1),v=s.y+(x.y-t.y)*l*(i?-1:1);return{x:u,y:v}},j=g(o);return e.jsxs("div",{className:"w-full h-full relative",onMouseLeave:()=>d(null),children:[e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chartGradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#0EA5E9",stopOpacity:"0.2"}),e.jsx("stop",{offset:"100%",stopColor:"#0EA5E9",stopOpacity:"0"})]})}),[0,25,50,75,100].map(s=>e.jsx("line",{x1:"0",y1:s,x2:"100",y2:s,stroke:"#f3f4f6",strokeWidth:"1",vectorEffect:"non-scaling-stroke"},s)),e.jsx("path",{d:`${j} L 100,100 L 0,100 Z`,fill:"url(#chartGradient)"}),e.jsx("path",{d:j,fill:"none",stroke:"#0EA5E9",strokeWidth:"3",vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round"}),o.map((s,n)=>e.jsxs("g",{onMouseEnter:()=>d(n),children:[e.jsx("circle",{cx:s.x,cy:s.y,r:"4",fill:r===n?"#fff":"transparent",stroke:r===n?"#0EA5E9":"transparent",strokeWidth:"2",className:"transition-all duration-200 cursor-pointer",vectorEffect:"non-scaling-stroke"}),e.jsx("rect",{x:s.x-2,y:"0",width:"4",height:"100",fill:"transparent",className:"cursor-crosshair"})]},n))]}),r!==null&&e.jsxs("div",{className:"absolute bg-midnight text-white text-xs rounded-lg py-1 px-2 pointer-events-none transform -translate-x-1/2 -translate-y-full shadow-xl z-20",style:{left:`${o[r].x}%`,top:`${o[r].y}%`,marginTop:"-10px"},children:[e.jsxs("div",{className:"font-bold",children:["$",o[r].val]}),e.jsx("div",{className:"text-[10px] text-gray-400",children:o[r].label}),e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-midnight"})]}),e.jsx("div",{className:"flex justify-between mt-2 px-2 text-[10px] text-gray-400 font-medium w-full absolute bottom-[-20px]",children:a.map((s,n)=>n%Math.ceil(a.length/5)===0?e.jsx("span",{children:s.displayDate},n):null)})]})};export{J as default};
