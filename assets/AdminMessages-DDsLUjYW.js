import{c as u,r as l,j as e,M as n,U as f,g as x}from"./index-G15lFc1y.js";import{S as p}from"./search-_Rs1iFVt.js";import{T as j}from"./trash-2-f3-So98d.js";const y=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],b=u("calendar",y),N=a=>{const r=new Date(a);return r.toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})+" â€¢ "+r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})},L=()=>{const[a,r]=l.useState([]),[m,c]=l.useState(!0),[o,h]=l.useState("");l.useEffect(()=>{(async()=>{try{const t=localStorage.getItem("token"),i=await x.get("http://localhost:5000/api/messages",{headers:{Authorization:`Bearer ${t}`}});r(i.data),c(!1)}catch(t){console.error("Error fetching messages:",t),c(!1)}})()},[]);const g=async s=>{if(window.confirm("Are you sure you want to delete this message?"))try{const t=localStorage.getItem("token");await x.delete(`http://localhost:5000/api/messages/${s}`,{headers:{Authorization:`Bearer ${t}`}}),r(a.filter(i=>i.id!==s))}catch(t){console.error("Error deleting message:",t),alert("Failed to delete message")}},d=a.filter(s=>s.name.toLowerCase().includes(o.toLowerCase())||s.email.toLowerCase().includes(o.toLowerCase())||s.subject?.toLowerCase().includes(o.toLowerCase())||s.message.toLowerCase().includes(o.toLowerCase()));return m?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading messages..."}):e.jsx("div",{className:"bg-gray-50/50 min-h-screen p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-midnight mb-2",children:"Messages"}),e.jsx("p",{className:"text-gray-500",children:"View and manage customer inquiries"})]}),e.jsxs("div",{className:"bg-white/50 backdrop-blur-sm border border-white/20 px-4 py-2 rounded-xl text-ocean font-medium shadow-sm",children:["Total: ",a.length]})]}),e.jsxs("div",{className:"mb-6 relative",children:[e.jsx(p,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search messages...",value:o,onChange:s=>h(s.target.value),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-gray-200 focus:border-ocean focus:ring-2 focus:ring-ocean/20 outline-none transition-all"})]}),d.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-gray-100 shadow-sm",children:[e.jsx("div",{className:"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(n,{className:"text-gray-400",size:32})}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No Messages Found"}),e.jsx("p",{className:"text-gray-400",children:"Your inbox is empty."})]}):e.jsx("div",{className:"grid gap-4",children:d.map(s=>e.jsx("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-md transition-all group",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-bold text-lg text-midnight",children:s.subject||"No Subject"}),e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-500 px-2 py-1 rounded-md font-mono",children:["#",s.id]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(f,{size:14}),e.jsx("span",{className:"font-medium text-gray-700",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(n,{size:14}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-ocean transition-colors",children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(b,{size:14}),e.jsx("span",{children:N(s.created_at)})]})]}),e.jsx("p",{className:"text-gray-600 leading-relaxed bg-gray-50 rounded-xl p-4",children:s.message})]}),e.jsxs("div",{className:"flex md:flex-col justify-end gap-2",children:[e.jsx("button",{onClick:()=>g(s.id),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Message",children:e.jsx(j,{size:20})}),e.jsx("a",{href:`mailto:${s.email}?subject=Re: ${s.subject||"Your Inquiry"}`,className:"p-2 text-gray-400 hover:text-ocean hover:bg-ocean/10 rounded-lg transition-colors flex items-center justify-center",title:"Reply via Email",children:e.jsx(n,{size:20})})]})]})},s.id))})]})})};export{L as default};
